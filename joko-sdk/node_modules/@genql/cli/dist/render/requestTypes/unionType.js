"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.unionType = void 0;
const lodash_1 = require("lodash");
const comment_1 = require("../common/comment");
const requestTypeName_1 = require("./requestTypeName");
const unionType = (type, ctx) => {
    var _a;
    let types = type.getTypes();
    if ((_a = ctx.config) === null || _a === void 0 ? void 0 : _a.sortProperties) {
        types = types.sort();
    }
    const fieldStrings = types.map((t) => `on_${t.name}?:${requestTypeName_1.requestTypeName(t)}`);
    const commonInterfaces = lodash_1.uniq(lodash_1.flatten(types.map((x) => x.getInterfaces())));
    fieldStrings.push(...commonInterfaces.map((type) => {
        return `on_${type.name}?: ${requestTypeName_1.requestTypeName(type)}`;
    }));
    fieldStrings.push('__typename?: boolean | number');
    ctx.addCodeBlock(`${comment_1.typeComment(type)}export interface ${requestTypeName_1.requestTypeName(type)}{\n${fieldStrings.map((x) => '    ' + x).join(',\n')}\n}`);
};
exports.unionType = unionType;
//# sourceMappingURL=unionType.js.map